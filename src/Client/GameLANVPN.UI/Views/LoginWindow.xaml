<Window x:Class="GameLANVPN.UI.Views.LoginWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="GameLAN VPN - Enter the Battlefield"
        Height="700"
        Width="450"
        WindowStartupLocation="CenterScreen"
        ResizeMode="NoResize"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Icon="../app.ico">

    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../Themes/WarcraftTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <!-- Animations -->
            <Storyboard x:Key="FadeInAnimation">
                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                               From="0" To="1" Duration="0:0:1.5"/>
                <DoubleAnimation Storyboard.TargetProperty="RenderTransform.Y"
                               From="50" To="0" Duration="0:0:1">
                    <DoubleAnimation.EasingFunction>
                        <QuadraticEase EasingMode="EaseOut"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
            </Storyboard>

            <Storyboard x:Key="GlowPulse" RepeatBehavior="Forever">
                <DoubleAnimation Storyboard.TargetProperty="Opacity"
                               From="0.5" To="1" Duration="0:0:2"
                               AutoReverse="True"/>
            </Storyboard>

            <Storyboard x:Key="HoverGlow">
                <DoubleAnimation Storyboard.TargetProperty="Effect.BlurRadius"
                               To="30" Duration="0:0:0.3"/>
            </Storyboard>
        </ResourceDictionary>
    </Window.Resources>

    <Window.Triggers>
        <EventTrigger RoutedEvent="Loaded">
            <BeginStoryboard Storyboard="{StaticResource FadeInAnimation}"/>
        </EventTrigger>
    </Window.Triggers>

    <Border CornerRadius="20" BorderThickness="3">
        <Border.BorderBrush>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#FFD700" Offset="0"/>
                <GradientStop Color="#B8860B" Offset="0.5"/>
                <GradientStop Color="#FFD700" Offset="1"/>
            </LinearGradientBrush>
        </Border.BorderBrush>

        <Grid>
            <Grid.RenderTransform>
                <TranslateTransform Y="0"/>
            </Grid.RenderTransform>

            <!-- Background with overlay pattern -->
            <Grid.Background>
                <ImageBrush ImageSource="pack://application:,,,/Assets/warcraft-bg.jpg"
                           Opacity="0.3" Stretch="UniformToFill"/>
            </Grid.Background>

            <!-- Dark overlay -->
            <Rectangle Fill="#DD0C1F3D"/>

            <!-- Stone texture border effect -->
            <Border CornerRadius="17" Margin="3">
                <Border.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="0,1" Opacity="0.1">
                        <GradientStop Color="Transparent" Offset="0"/>
                        <GradientStop Color="#1E3A5F" Offset="0.3"/>
                        <GradientStop Color="#1E3A5F" Offset="0.7"/>
                        <GradientStop Color="Transparent" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>

            <!-- Main Content -->
            <Grid Margin="40,30">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Close Button -->
                <Button Grid.Row="0"
                       HorizontalAlignment="Right"
                       Width="30" Height="30"
                       Background="Transparent"
                       BorderThickness="0"
                       Click="CloseButton_Click"
                       Cursor="Hand">
                    <Button.Content>
                        <TextBlock Text="✕"
                                  Foreground="#FFD700"
                                  FontSize="20"
                                  FontWeight="Bold"/>
                    </Button.Content>
                    <Button.Style>
                        <Style TargetType="Button">
                            <Setter Property="Template">
                                <Setter.Value>
                                    <ControlTemplate TargetType="Button">
                                        <Border Background="{TemplateBinding Background}"
                                               CornerRadius="15">
                                            <ContentPresenter HorizontalAlignment="Center"
                                                            VerticalAlignment="Center"/>
                                        </Border>
                                    </ControlTemplate>
                                </Setter.Value>
                            </Setter>
                            <Style.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter Property="Background" Value="#33FFD700"/>
                                </Trigger>
                            </Style.Triggers>
                        </Style>
                    </Button.Style>
                </Button>

                <!-- Logo and Title -->
                <StackPanel Grid.Row="1" HorizontalAlignment="Center" Margin="0,20,0,40">
                    <!-- Warcraft-style Icon -->
                    <Border Width="120" Height="120"
                           HorizontalAlignment="Center"
                           CornerRadius="60"
                           BorderThickness="3">
                        <Border.BorderBrush>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                <GradientStop Color="#FFD700" Offset="0"/>
                                <GradientStop Color="#B8860B" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.BorderBrush>
                        <Border.Background>
                            <RadialGradientBrush>
                                <GradientStop Color="#1E3A5F" Offset="0"/>
                                <GradientStop Color="#0C1F3D" Offset="1"/>
                            </RadialGradientBrush>
                        </Border.Background>
                        <Border.Effect>
                            <DropShadowEffect x:Name="LogoGlow" Color="#FFD700" BlurRadius="20" ShadowDepth="0" Opacity="0.5"/>
                        </Border.Effect>
                        <Border.Triggers>
                            <EventTrigger RoutedEvent="Loaded">
                                <BeginStoryboard>
                                    <Storyboard RepeatBehavior="Forever">
                                        <DoubleAnimation Storyboard.TargetName="LogoGlow"
                                                       Storyboard.TargetProperty="Opacity"
                                                       From="0.3" To="0.8" Duration="0:0:2"
                                                       AutoReverse="True"/>
                                    </Storyboard>
                                </BeginStoryboard>
                            </EventTrigger>
                        </Border.Triggers>

                        <Grid>
                            <!-- Sword Cross Icon -->
                            <Canvas Width="80" Height="80">
                                <Path Data="M40,10 L45,30 L60,30 L50,40 L60,50 L45,50 L40,70 L35,50 L20,50 L30,40 L20,30 L35,30 Z"
                                     Fill="{StaticResource GoldGradientBrush}"
                                     Stroke="#B8860B"
                                     StrokeThickness="1"/>
                                <Path Data="M25,25 L55,55 M55,25 L25,55"
                                     Stroke="#FFD700"
                                     StrokeThickness="3"/>
                            </Canvas>
                        </Grid>
                    </Border>

                    <!-- Title -->
                    <TextBlock Text="GAMELAN VPN"
                             Style="{StaticResource WarcraftTitle}"
                             HorizontalAlignment="Center"
                             Margin="0,20,0,0"/>

                    <!-- Subtitle -->
                    <TextBlock Text="Unite the Realms, Conquer Together"
                             Style="{StaticResource WarcraftSubtitle}"
                             HorizontalAlignment="Center"
                             Margin="0,5,0,0"/>

                    <!-- Decorative Line -->
                    <Border Height="2" Width="200" Margin="0,15,0,0">
                        <Border.Background>
                            <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                                <GradientStop Color="Transparent" Offset="0"/>
                                <GradientStop Color="#FFD700" Offset="0.5"/>
                                <GradientStop Color="Transparent" Offset="1"/>
                            </LinearGradientBrush>
                        </Border.Background>
                    </Border>
                </StackPanel>

                <!-- Login Form -->
                <StackPanel Grid.Row="2" Margin="0,0,0,20">
                    <!-- Server URL Field -->
                    <Grid Margin="0,0,0,20">
                        <TextBox x:Name="ServerUrlTextBox"
                                Style="{StaticResource WarcraftTextBox}"
                                Text="{Binding ServerUrl, UpdateSourceTrigger=PropertyChanged}"
                                Tag="Battle.net Server"
                                Height="45">
                            <TextBox.InputBindings>
                                <KeyBinding Key="Enter" Command="{Binding LoginCommand}"/>
                            </TextBox.InputBindings>
                        </TextBox>
                        <Path Data="M12,2 L12,12 M7,7 L12,12 L17,7"
                             Stroke="#B8860B"
                             StrokeThickness="2"
                             Width="20" Height="20"
                             HorizontalAlignment="Right"
                             Margin="0,0,15,0"
                             Stretch="Uniform"/>
                    </Grid>

                    <!-- Username Field -->
                    <Grid Margin="0,0,0,20">
                        <TextBox x:Name="UsernameTextBox"
                                Style="{StaticResource WarcraftTextBox}"
                                Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                                Tag="Hero Name"
                                Height="45">
                            <TextBox.InputBindings>
                                <KeyBinding Key="Enter" Command="{Binding LoginCommand}"/>
                            </TextBox.InputBindings>
                        </TextBox>
                        <Path Data="M12,12 C14,12 16,10 16,8 C16,6 14,4 12,4 C10,4 8,6 8,8 C8,10 10,12 12,12 M12,14 C8,14 4,16 4,20 L20,20 C20,16 16,14 12,14"
                             Stroke="#B8860B"
                             StrokeThickness="2"
                             Width="20" Height="20"
                             HorizontalAlignment="Right"
                             Margin="0,0,15,0"
                             Stretch="Uniform"/>
                    </Grid>

                    <!-- Password Field -->
                    <Grid Margin="0,0,0,20">
                        <PasswordBox x:Name="PasswordBox"
                                   Style="{StaticResource WarcraftPasswordBox}"
                                   Tag="Secret Key"
                                   Height="45">
                            <PasswordBox.InputBindings>
                                <KeyBinding Key="Enter" Command="{Binding LoginCommand}"/>
                            </PasswordBox.InputBindings>
                        </PasswordBox>
                        <Path Data="M12,17 C13,17 14,16 14,15 C14,14 13,13 12,13 C11,13 10,14 10,15 C10,16 11,17 12,17 M18,8 L18,7 C18,4 15,1 12,1 C9,1 6,4 6,7 L6,8 C4,8 3,9 3,11 L3,20 C3,22 4,23 6,23 L18,23 C20,23 21,22 21,20 L21,11 C21,9 20,8 18,8 M8,7 C8,5 10,3 12,3 C14,3 16,5 16,7 L16,8 L8,8 L8,7"
                             Stroke="#B8860B"
                             StrokeThickness="2"
                             Width="20" Height="20"
                             HorizontalAlignment="Right"
                             Margin="0,0,15,0"
                             Stretch="Uniform"/>
                    </Grid>

                    <!-- Remember Me Checkbox -->
                    <CheckBox Content="Remember this realm"
                            IsChecked="{Binding RememberServer}"
                            Foreground="#C0C0C0"
                            FontFamily="Palatino Linotype"
                            FontSize="14"
                            Margin="5,0,0,20">
                        <CheckBox.Style>
                            <Style TargetType="CheckBox">
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="CheckBox">
                                            <StackPanel Orientation="Horizontal">
                                                <Border Width="20" Height="20"
                                                       BorderBrush="#B8860B"
                                                       BorderThickness="2"
                                                       Background="#1A1A2E"
                                                       CornerRadius="3"
                                                       Margin="0,0,10,0">
                                                    <TextBlock x:Name="CheckMark"
                                                             Text="✓"
                                                             Foreground="#FFD700"
                                                             FontSize="14"
                                                             FontWeight="Bold"
                                                             HorizontalAlignment="Center"
                                                             VerticalAlignment="Center"
                                                             Visibility="Collapsed"/>
                                                </Border>
                                                <ContentPresenter/>
                                            </StackPanel>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsChecked" Value="True">
                                                    <Setter TargetName="CheckMark" Property="Visibility" Value="Visible"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </CheckBox.Style>
                    </CheckBox>

                    <!-- Login Button -->
                    <Button Content="ENTER BATTLE"
                           Command="{Binding LoginCommand}"
                           IsDefault="True"
                           Style="{StaticResource WarcraftButton}"
                           Height="50"
                           FontSize="18"/>

                    <!-- Register Link -->
                    <TextBlock HorizontalAlignment="Center" Margin="0,20,0,0">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="FontFamily" Value="Palatino Linotype"/>
                                <Setter Property="FontSize" Value="14"/>
                            </Style>
                        </TextBlock.Style>
                        <Run Text="New hero? " Foreground="#C0C0C0"/>
                        <Hyperlink Command="{Binding RegisterCommand}"
                                  TextDecorations="None">
                            <Hyperlink.Style>
                                <Style TargetType="Hyperlink">
                                    <Setter Property="Foreground" Value="#FFD700"/>
                                    <Style.Triggers>
                                        <Trigger Property="IsMouseOver" Value="True">
                                            <Setter Property="Foreground" Value="#FFF8DC"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </Hyperlink.Style>
                            <Run Text="Create your legend"/>
                        </Hyperlink>
                    </TextBlock>
                </StackPanel>

                <!-- Status Message -->
                <Grid Grid.Row="3" Margin="0,0,0,20">
                    <Border Background="#22000000"
                           CornerRadius="5"
                           Padding="10,5"
                           Visibility="{Binding HasStatusMessage, Converter={StaticResource BooleanToVisibilityConverter}}">
                        <TextBlock Text="{Binding StatusMessage}"
                                 Foreground="{Binding StatusColor}"
                                 HorizontalAlignment="Center"
                                 TextWrapping="Wrap"
                                 FontFamily="Palatino Linotype"
                                 FontSize="14"
                                 FontWeight="Medium"/>
                    </Border>
                </Grid>

                <!-- Loading Animation -->
                <Grid Grid.Row="4" Height="30"
                     Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
                    <Grid.Resources>
                        <Storyboard x:Key="LoadingAnimation" RepeatBehavior="Forever">
                            <DoubleAnimation Storyboard.TargetName="LoadingBar"
                                           Storyboard.TargetProperty="Width"
                                           From="0" To="370" Duration="0:0:2"
                                           AutoReverse="True"/>
                        </Storyboard>
                    </Grid.Resources>
                    <Grid.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard Storyboard="{StaticResource LoadingAnimation}"/>
                        </EventTrigger>
                    </Grid.Triggers>

                    <Border BorderBrush="#B8860B"
                           BorderThickness="2"
                           CornerRadius="5"
                           Background="#1A1A2E">
                        <Rectangle x:Name="LoadingBar"
                                  Fill="{StaticResource GoldGradientBrush}"
                                  HorizontalAlignment="Left"
                                  RadiusX="3" RadiusY="3"/>
                    </Border>

                    <TextBlock Text="Connecting to the realm..."
                             HorizontalAlignment="Center"
                             VerticalAlignment="Center"
                             Foreground="#FFD700"
                             FontFamily="Palatino Linotype"
                             FontSize="12"/>
                </Grid>

            </Grid>
        </Grid>
    </Border>
</Window>